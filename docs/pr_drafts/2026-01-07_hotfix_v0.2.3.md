# Hotfix v0.2.3: Cross-Domain Cookie Fix (Bearer Token)

## Summary
Implements a robust fix for cross-domain authentication failures (Vercel Frontend -> Render Backend) by implementing Bearer Token authentication and enabling `SameSite=None` for cookies.

## Problem
- **Issue**: Login fails with `401 Unauthorized` on production.
- **Cause**: Browsers block `SameSite=Lax` cookies in cross-site sub-requests (Socket/XHR) to the backend. The Backend was *only* looking for cookies, so it rejected the request.

## Changes

### Backend
- **`src/auth/jwt.strategy.ts`**: Updated to accept JWT from *either* Cookies OR `Authorization: Bearer` header.
- **`src/main.ts`**: Added improved CORS logging (from initial debugging) to catch configuration errors.

### Frontend
- **`api/auth/callback/route.ts`**:
    - Changed `access_token` cookie to `SameSite=None` (allows cross-site usage).
    - Added `auth_token` (public/non-httpOnly) cookie so client JS can read it.
- **`src/hooks/useSocket.ts`**:
    - Updated Socket.io client to read `auth_token` and send it as `{ token }` in the handshake.

## Verification
- [ ] Merge to `main`.
- [ ] Deploy to Production.
- [ ] Verify Login works on Desktop Chrome.
- [ ] Verify Login works on Mobile/Safari (Cross-Tracking protection).
